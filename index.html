<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Magical Birthday Experience</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Dancing+Script:wght@500;700&family=Playfair+Display:ital@1&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Dancing Script", cursive;
        overflow: hidden;
        height: 100vh;
        color: white;
        background: linear-gradient(135deg, #ff69b4, #ff1493, #9370db, #8a2be2);
        background-size: 400% 400%;
        animation: gradientBG 15s ease infinite;
      }

      @keyframes gradientBG {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      /* Canvas for particles */
      #particleCanvas {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 0;
        pointer-events: none;
      }

      /* Page container and transitions */
      .page {
        position: absolute;
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        opacity: 0;
        transition: opacity 1s ease-in-out;
        padding: 20px;
        text-align: center;
        z-index: 1;
      }

      .active {
        opacity: 1;
        z-index: 2;
      }

      /* Common elements */
      h1 {
        font-family: "Great Vibes", cursive;
        font-size: 3.5rem;
        margin-bottom: 20px;
        text-shadow: 0 0 10px rgba(255, 105, 180, 0.8);
        background: linear-gradient(45deg, #ff69b4, #ffeb3b, #ff69b4);
        background-size: 200% auto;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        animation: shimmer 3s linear infinite;
      }

      @keyframes shimmer {
        0% {
          background-position: 0% center;
        }
        100% {
          background-position: 200% center;
        }
      }

      p {
        font-size: 1.5rem;
        margin-bottom: 15px;
        text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
      }

      input {
        padding: 12px 20px;
        border: 2px solid #ff69b4;
        border-radius: 30px;
        background: rgba(255, 255, 255, 0.2);
        color: white;
        font-size: 1.2rem;
        text-align: center;
        margin: 15px 0;
        width: 300px;
        backdrop-filter: blur(5px);
        font-family: "Playfair Display", serif;
      }

      input::placeholder {
        color: rgba(255, 255, 255, 0.7);
      }

      button {
        padding: 12px 30px;
        border: none;
        border-radius: 30px;
        background: linear-gradient(45deg, #ff69b4, #ff1493);
        color: white;
        font-size: 1.2rem;
        cursor: pointer;
        margin: 15px 0;
        transition: transform 0.3s, box-shadow 0.3s;
        box-shadow: 0 5px 15px rgba(255, 105, 180, 0.4);
        font-family: "Dancing Script", cursive;
        font-weight: bold;
      }

      button:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(255, 105, 180, 0.6);
      }

      .message {
        margin-top: 20px;
        font-size: 1.2rem;
        padding: 10px 20px;
        border-radius: 10px;
        background: rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(5px);
        max-width: 80%;
      }

      /* Floating elements */
      .floating-elements {
        position: absolute;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 0;
        overflow: hidden;
      }

      .floating-element {
        position: absolute;
        animation: float 6s ease-in-out infinite;
        opacity: 0.7;
      }

      @keyframes float {
        0% {
          transform: translateY(100vh) rotate(0deg);
          opacity: 0;
        }
        10% {
          opacity: 0.7;
        }
        90% {
          opacity: 0.7;
        }
        100% {
          transform: translateY(-100px) rotate(360deg);
          opacity: 0;
        }
      }

      /* Speech bubbles */
      .speech-bubble {
        position: absolute;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 20px;
        padding: 15px;
        color: #ff1493;
        font-size: 1.1rem;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        max-width: 200px;
        animation: fadeInOut 5s ease-in-out;
        z-index: 10;
      }

      .speech-bubble:after {
        content: "";
        position: absolute;
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
        border-width: 10px 10px 0;
        border-style: solid;
        border-color: rgba(255, 255, 255, 0.9) transparent transparent;
      }

      @keyframes fadeInOut {
        0% {
          opacity: 0;
          transform: translateY(20px);
        }
        20% {
          opacity: 1;
          transform: translateY(0);
        }
        80% {
          opacity: 1;
          transform: translateY(0);
        }
        100% {
          opacity: 0;
          transform: translateY(-20px);
        }
      }

      /* Page 1 - DOB Entry */
      #page1 {
        background: rgba(0, 0, 0, 0.2);
      }

      /* Page 2 - Spin the Wheel */
      #page2 {
        display: none;
      }

      .wheel-container {
        position: relative;
        width: 300px;
        height: 300px;
        margin: 30px auto;
      }

      .wheel {
        width: 100%;
        height: 100%;
        border-radius: 50%;
        position: relative;
        overflow: hidden;
        transition: transform 4s cubic-bezier(0.17, 0.67, 0.83, 0.67);
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
      }

      .wheel-section {
        position: absolute;
        width: 50%;
        height: 50%;
        transform-origin: bottom right;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
      }

      .wheel-section img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transform: rotate(-45deg);
      }

      .pointer {
        position: absolute;
        top: -20px;
        left: 50%;
        transform: translateX(-50%);
        width: 30px;
        height: 50px;
        background: #ff1493;
        clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
        z-index: 10;
      }

      /* Page 3 - 3D Spinning Album */
      #page3 {
        display: none;
      }

      .carousel {
        width: 300px;
        height: 300px;
        position: relative;
        margin: 40px auto;
        perspective: 1000px;
      }

      .carousel-container {
        width: 100%;
        height: 100%;
        position: absolute;
        transform-style: preserve-3d;
        animation: rotate 20s infinite linear;
      }

      .carousel-item {
        position: absolute;
        width: 200px;
        height: 200px;
        background: rgba(255, 255, 255, 0.2);
        border: 5px solid white;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        transition: transform 0.5s;
        cursor: pointer;
      }

      .carousel-item img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.3s;
      }

      .carousel-item:hover img {
        transform: scale(1.1);
      }

      .photo-message {
        position: absolute;
        top: -30px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(255, 255, 255, 0.9);
        padding: 5px 10px;
        border-radius: 15px;
        color: #ff1493;
        font-size: 0.9rem;
        opacity: 0;
        transition: opacity 0.3s, top 0.3s;
      }

      .carousel-item:hover .photo-message {
        opacity: 1;
        top: -40px;
      }

      @keyframes rotate {
        from {
          transform: rotateY(0);
        }
        to {
          transform: rotateY(360deg);
        }
      }

      /* Page 4 - First Kiss Date */
      #page4 {
        display: none;
      }

      /* Page 5 - Grand Surprise */
      #page5 {
        display: none;
      }

      .cake {
        width: 150px;
        height: 150px;
        position: relative;
        margin: 20px auto;
      }

      .cake-base {
        width: 150px;
        height: 60px;
        background: #f8bbd0;
        border-radius: 10px 10px 0 0;
        position: absolute;
        bottom: 0;
      }

      .cake-middle {
        width: 120px;
        height: 40px;
        background: #f48fb1;
        border-radius: 10px 10px 0 0;
        position: absolute;
        bottom: 60px;
        left: 15px;
      }

      .cake-top {
        width: 90px;
        height: 40px;
        background: #f06292;
        border-radius: 10px 10px 0 0;
        position: absolute;
        bottom: 100px;
        left: 30px;
      }

      .candle {
        width: 10px;
        height: 30px;
        background: #fff;
        position: absolute;
        bottom: 140px;
        left: 70px;
      }

      .flame {
        width: 15px;
        height: 25px;
        background: #ffeb3b;
        border-radius: 50% 50% 20% 20%;
        position: absolute;
        bottom: 170px;
        left: 67.5px;
        animation: flicker 1s infinite alternate;
        box-shadow: 0 0 10px #ff9800, 0 0 20px #ff9800;
      }

      @keyframes flicker {
        0% {
          transform: scale(1);
          opacity: 1;
        }
        100% {
          transform: scale(0.8);
          opacity: 0.8;
        }
      }

      .countdown {
        font-size: 3rem;
        margin: 20px 0;
        color: #ffeb3b;
        text-shadow: 0 0 10px rgba(255, 235, 59, 0.8);
      }

      .secret-message {
        opacity: 0;
        transition: opacity 2s;
        margin-top: 30px;
        font-size: 1.5rem;
        color: #ffeb3b;
        text-shadow: 0 0 10px rgba(255, 235, 59, 0.8);
      }

      /* Fireworks */
      .firework {
        position: absolute;
        width: 5px;
        height: 5px;
        border-radius: 50%;
        animation: explode 1s forwards;
        opacity: 0;
      }

      @keyframes explode {
        0% {
          transform: translateY(100vh);
          opacity: 1;
        }
        100% {
          transform: translateY(0);
          opacity: 0;
        }
      }

      /* Upload button */
      .upload-btn {
        margin-top: 20px;
        background: linear-gradient(45deg, #4169e1, #1e90ff);
      }

      /* Easter egg area */
      .easter-egg {
        position: absolute;
        width: 40px;
        height: 40px;
        opacity: 1;
        cursor: pointer;
        z-index: 100;
      }

      /* Mobile specific styles */
      @media (max-width: 768px) {
        h1 {
          font-size: 2.5rem;
        }

        p {
          font-size: 1.2rem;
        }

        input,
        button {
          width: 90%;
          max-width: 300px;
        }

        .wheel-container,
        .carousel {
          width: 250px;
          height: 250px;
        }

        .carousel-item {
          width: 150px;
          height: 150px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Canvas for particles -->
    <canvas id="particleCanvas"></canvas>

    <!-- Floating elements container -->
    <div class="floating-elements" id="floatingElements"></div>

    <!-- Easter egg areas -->
    <div
      class="easter-egg"
      style="top: 10%; left: 5%"
      onclick="triggerEasterEgg(this)"
    ></div>
    <a href="message.html" style="text-decoration: none">
      <div class="easter-egg" style="top: 80%; left: 90%"></div
    ></a>
    <div
      class="easter-egg"
      style="top: 40%; left: 15%"
      onclick="triggerEasterEgg(this)"
    ></div>
    <div
      class="easter-egg"
      style="top: 60%; left: 85%"
      onclick="triggerEasterEgg(this)"
    ></div>

    <!-- Page 1: DOB Entry -->
    <div id="page1" class="page active">
      <h1>My Beautiful Love</h1>
      <p>
        Enter your favourite person name (eg. Virat) to begin this magical
        journey<br />üòúüòú
      </p>
      <input type="text" id="favourite" placeholder="Your Favourite Person." />
      <button onclick="checkDOB()">Enter</button>
      <div id="dob-message" class="message"></div>
    </div>

    <!-- Page 2: Spin the Wheel -->
    <div id="page2" class="page">
      <h1>Our Memories</h1>
      <p>Spin the wheel and remind which location you liked where we met!</p>

      <div class="wheel-container">
        <div class="pointer"></div>
        <div class="wheel" id="wheel">
          <div
            class="wheel-section"
            style="transform: rotate(0deg); background-color: #ff7675"
          >
            <p>Delhi</p>
          </div>
          <div
            class="wheel-section"
            style="transform: rotate(60deg); background-color: #74b9ff"
          >
            <p>Mumbai</p>
          </div>
          <div
            class="wheel-section"
            style="transform: rotate(120deg); background-color: #55efc4"
          >
            <p>Kolkata</p>
          </div>
          <div
            class="wheel-section"
            style="transform: rotate(180deg); background-color: #ffeaa7"
          >
            <p>Varansi</p>
          </div>
          <div
            class="wheel-section"
            style="transform: rotate(240deg); background-color: #a29bfe"
          >
            <p>Chennai</p>
          </div>
          <div
            class="wheel-section"
            style="transform: rotate(300deg); background-color: #fd79a8"
          >
            <p>Goa</p>
          </div>
        </div>
      </div>

      <button onclick="spinWheel()">Spin</button>
      <div id="wheel-message" class="message"></div>
    </div>

    <!-- Page 3: 3D Spinning Album -->
    <div id="page3" class="page">
      <h1>Our Journey</h1>
      <p>Click on a photo to release a heart balloon</p>

      <div class="carousel">
        <div class="carousel-container">
          <div
            class="carousel-item"
            style="transform: rotateY(0deg) translateZ(200px)"
          >
            <img src="Photos/p1.jpg" alt="Memory 1" />
            <div class="photo-message">I love this moment üíï</div>
          </div>
          <div
            class="carousel-item"
            style="transform: rotateY(60deg) translateZ(200px)"
          >
            <img src="Photos/p2.jpg" alt="Memory 2" />
            <div class="photo-message">You're so beautiful üíñ</div>
          </div>
          <div
            class="carousel-item"
            style="transform: rotateY(120deg) translateZ(200px)"
          >
            <img src="Photos/p3.jpeg" alt="Memory 3" />
            <div class="photo-message">My heart skips a beat üåü</div>
          </div>
          <div
            class="carousel-item"
            style="transform: rotateY(180deg) translateZ(200px)"
          >
            <img src="Photos/p4.jpeg" alt="Memory 4" />
            <div class="photo-message">Forever with you üíë</div>
          </div>
          <div
            class="carousel-item"
            style="transform: rotateY(240deg) translateZ(200px)"
          >
            <img src="Photos/p5.jpeg" alt="Memory 5" />
            <div class="photo-message">You complete me üíò</div>
          </div>
          <div
            class="carousel-item"
            style="transform: rotateY(300deg) translateZ(200px)"
          >
            <img src="Photos/p6.jpeg" alt="Memory 6" />
            <div class="photo-message">My everything üíû</div>
          </div>
        </div>
      </div>
      <audio id="album" src="Photos/album.mp3"></audio>
      <div id="album-message" class="message">Click one photo to continue</div>

      <button
        class="upload-btn"
        onclick="document.getElementById('file-input').click()"
      >
        <i class="fas fa-upload"></i> Upload a Selfie
      </button>
      <input
        type="file"
        id="file-input"
        accept="image/*"
        style="display: none"
      />
    </div>

    <!-- Page 4: First Kiss Date -->
    <div id="page4" class="page">
      <h1>Our First Kiss</h1>
      <p>When did we share our first magical kiss?<br />ü§´ü§´</p>
      <input type="date" id="kiss-input" />
      <button onclick="checkKissDate()">Enter</button>
      <div id="kiss-message" class="message"></div>
    </div>

    <!-- Page 5: Grand Surprise -->
    <div id="page5" class="page">
      <div id="fireworks"></div>

      <h1>Happy Birthday My Love! ‚ù§Ô∏è</h1>

      <div class="cake">
        <div class="cake-base"></div>
        <div class="cake-middle"></div>
        <div class="cake-top"></div>
        <div class="candle"></div>
        <div class="flame"></div>
      </div>

      <div class="countdown" id="countdown">30</div>

      <p>
        ‚ÄúHappy Birthday, my love ‚ù§Ô∏è May your life always be filled with endless
        happiness, success, and love.‚Äù üíï
      </p>

      <div class="secret-message" id="secret-message">
        Forever Yours ‚ù§Ô∏è Virat
      </div>
      <audio id="bgMusic" src="Photos/bgMusic.mp3"></audio>
    </div>

    <script>
      // Setup canvas for particles
      const canvas = document.getElementById("particleCanvas");
      const ctx = canvas.getContext("2d");
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      window.addEventListener("resize", () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      });

      // Particle array
      let particles = [];

      // Create a new particle at (x, y)
      function createParticle(x, y) {
        particles.push({
          x: x,
          y: y,
          size: Math.random() * 6 + 4,
          speedX: (Math.random() - 0.5) * 2,
          speedY: (Math.random() - 1.5) * 2,
          color: `hsl(${Math.random() * 360},10%,10%)`,
          opacity: 1,
        });
      }

      // Animate particles
      function animateParticles() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        for (let i = particles.length - 1; i >= 0; i--) {
          let p = particles[i];
          p.x += p.speedX;
          p.y += p.speedY;
          p.opacity -= 0.02;

          ctx.fillStyle = `rgba(${p.color.replace(/[^\d,]/g, "")},${
            p.opacity
          })`;
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
          ctx.fill();

          if (p.opacity <= 0) particles.splice(i, 1);
        }
        requestAnimationFrame(animateParticles);
      }
      animateParticles();

      // Follow mouse
      window.addEventListener("mousemove", (e) => {
        createParticle(e.clientX, e.clientY);
      });

      // Optional: click to create burst
      window.addEventListener("click", (e) => {
        for (let i = 0; i < 5; i++) createParticle(e.clientX, e.clientY);
      });

      // Configuration - Replace with actual dates
      const correctKissDate = "2019-02-09"; // Replace with actual first kiss date

      // Speech bubble messages for each page
      const pageMessages = {
        page1: [
          "Can't wait to see your smile today üòò",
          "You're the most beautiful woman I know üíñ",
          "This is going to be special, just like you üåü",
        ],
        page2: [
          "I remember how happy we were that day! üíï",
          "You have such a beautiful memory üí≠",
          "Our adventures are my favorite stories üó∫Ô∏è",
        ],
        page3: [
          "Each photo holds a special memory üì∏",
          "Your smile lights up every picture üåû",
          "I fall in love with you more every day üíò",
        ],
        page4: [
          "That was the most magical moment ‚ú®",
          "I'll never forget how I felt that night üåô",
          "Your lips were meant for mine üíã",
        ],
        page5: [
          "You make every day worth celebrating üéâ",
          "I'm the luckiest person in the world üåé",
          "My heart belongs to you forever üíû",
        ],
      };

      // Create floating elements
      function createFloatingElements() {
        const container = document.getElementById("floatingElements");
        const types = [
          "‚ù§Ô∏è",
          "üíñ",
          "üíï",
          "üíò",
          "üíù",
          "üíì",
          "‚ú®",
          "üåü",
          "üéà",
          "üéâ",
        ];

        for (let i = 0; i < 25; i++) {
          const element = document.createElement("div");
          element.classList.add("floating-element");
          element.innerHTML = types[Math.floor(Math.random() * types.length)];
          element.style.left = Math.random() * 100 + "vw";
          element.style.fontSize = Math.random() * 20 + 15 + "px";
          element.style.animationDelay = Math.random() * 5 + "s";
          element.style.animationDuration = Math.random() * 5 + 5 + "s";
          container.appendChild(element);
        }
      }

      // Create speech bubble
      function createSpeechBubble(pageId) {
        const messages = pageMessages[pageId];
        const message = messages[Math.floor(Math.random() * messages.length)];

        const bubble = document.createElement("div");
        bubble.classList.add("speech-bubble");
        bubble.textContent = message;
        bubble.style.top = Math.random() * 60 + 10 + "%";
        bubble.style.left = Math.random() * 60 + 10 + "%";

        document.body.appendChild(bubble);

        // Remove bubble after animation
        setTimeout(() => {
          document.body.removeChild(bubble);
        }, 5000);
      }

      // Create fireworks
      function createFireworks() {
        const container = document.getElementById("fireworks");

        setInterval(() => {
          for (let i = 0; i < 15; i++) {
            setTimeout(() => {
              const firework = document.createElement("div");
              firework.classList.add("firework");
              firework.style.left = Math.random() * 100 + "vw";
              firework.style.background = `hsl(${
                Math.random() * 360
              }, 100%, 60%)`;
              container.appendChild(firework);

              setTimeout(() => {
                if (firework.parentNode) {
                  container.removeChild(firework);
                }
              }, 1000);
            }, i * 100);
          }
        }, 2000);
      }

      // Show specific page with transition
      function showPage(pageId) {
        document.querySelectorAll(".page").forEach((page) => {
          page.classList.remove("active");
          page.style.display = "none";
        });

        const nextPage = document.getElementById(pageId);
        nextPage.style.display = "flex";
        setTimeout(() => {
          nextPage.classList.add("active");
        }, 10);

        // Create speech bubble for the page
        createSpeechBubble(pageId);

        // Create fireworks on final page
        if (pageId === "page5") {
          createFireworks();
          startCountdown();
        }
      }

      // Start countdown for final page
      function startCountdown() {
        let count = 46;
        const countdownEl = document.getElementById("countdown");
        const countdown = setInterval(() => {
          count--;
          countdownEl.textContent = count;

          if (count <= 0) {
            clearInterval(countdown);
            document.getElementById("secret-message").style.opacity = "1";

            // Create final fireworks burst
            for (let i = 0; i < 50; i++) {
              setTimeout(() => {
                const firework = document.createElement("div");
                firework.classList.add("firework");
                firework.style.left = Math.random() * 100 + "vw";
                firework.style.background = `hsl(${
                  Math.random() * 360
                }, 100%, 60%)`;
                document.getElementById("fireworks").appendChild(firework);

                setTimeout(() => {
                  if (firework.parentNode) {
                    document.getElementById("fireworks").removeChild(firework);
                  }
                }, 1000);
              }, i * 50);
            }
            if (count <= 0) {
              countdownEl.textContent = "It's time to find some hidden points.";
            }
          }
        }, 1000);
      }

      // Check DOB function
      function checkDOB() {
        const input = document.getElementById("favourite").value;
        const message = document.getElementById("dob-message");

        if (input === "Virat") {
          message.textContent = "Welcome to our magical journey, my love!";
          message.style.color = "#ffffff";

          // Create success effect
          createHeartsBurst();

          setTimeout(() => {
            showPage("page2");
          }, 1500);
        } else {
          message.textContent = "Haha... try again Cutie";
          message.style.color = "#ffffff";
        }
      }

      // Spin wheel function
      function spinWheel() {
        const wheel = document.getElementById("wheel");
        const message = document.getElementById("wheel-message");

        // Random rotation between 5-10 full rotations plus a random angle
        const degrees = 1800 + Math.floor(Math.random() * 1800);
        wheel.style.transform = `rotate(${degrees}deg)`;

        setTimeout(() => {
          message.textContent = "Where was this clicked?";

          // For demo purposes, automatically proceed after delay
          setTimeout(() => {
            message.textContent =
              "Correct! You remember everything about us! üíñ";
            message.style.color = "#7fff00";

            // Create confetti effect
            createConfetti();

            setTimeout(() => {
              showPage("page3");
              playMusic("album");
            }, 1500);
          }, 2000);
        }, 4000);
      }

      // Check kiss date function
      function checkKissDate() {
        const input = document.getElementById("kiss-input").value;
        const message = document.getElementById("kiss-message");

        if (input === correctKissDate) {
          message.textContent = "I remember that magical moment too! üíã";
          message.style.color = "#fffff";

          // Create hearts explosion effect
          createHeartsBurst();

          setTimeout(() => {
            showPage("page5");
            playMusic("bgMusic");
          }, 2000);
        } else {
          message.textContent = "Don't act shy, you know it üòâ";
          message.style.color = "#fffff";
        }
      }

      function playMusic(musicId) {
        const music = document.getElementById(musicId);
        music.play();
      }
      function pauseMusic(musicId) {
        const music = document.getElementById(musicId);
        music.pause();
      }
      // Create hearts burst effect
      function createHeartsBurst() {
        for (let i = 0; i < 20; i++) {
          setTimeout(() => {
            const heart = document.createElement("div");
            heart.innerHTML = "üíñ";
            heart.style.position = "absolute";
            heart.style.fontSize = "25px";
            heart.style.top = "50%";
            heart.style.left = "50%";
            heart.style.zIndex = "1000";
            heart.style.opacity = "1";
            heart.style.transition = "all 1.5s ease-out";

            const angle = Math.random() * Math.PI * 2;
            const distance = 100 + Math.random() * 100;

            document.body.appendChild(heart);

            setTimeout(() => {
              heart.style.transform = `translate(${
                Math.cos(angle) * distance
              }px, ${Math.sin(angle) * distance}px)`;
              heart.style.opacity = "0";
            }, 10);

            // Remove heart after animation
            setTimeout(() => {
              if (heart.parentNode) {
                document.body.removeChild(heart);
              }
            }, 1500);
          }, i * 100);
        }
      }

      // Create confetti effect
      function createConfetti() {
        for (let i = 0; i < 50; i++) {
          setTimeout(() => {
            const confetti = document.createElement("div");
            confetti.innerHTML = ["‚ú®", "üéâ", "üåü", "üí´"][
              Math.floor(Math.random() * 4)
            ];
            confetti.style.position = "absolute";
            confetti.style.fontSize = "20px";
            confetti.style.top = "50%";
            confetti.style.left = "50%";
            confetti.style.zIndex = "1000";
            confetti.style.opacity = "1";
            confetti.style.transition = "all 1.5s ease-out";

            const angle = Math.random() * Math.PI * 2;
            const distance = 100 + Math.random() * 100;

            document.body.appendChild(confetti);

            setTimeout(() => {
              confetti.style.transform = `translate(${
                Math.cos(angle) * distance
              }px, ${Math.sin(angle) * distance}px)`;
              confetti.style.opacity = "0";
            }, 10);

            // Remove confetti after animation
            setTimeout(() => {
              if (confetti.parentNode) {
                document.body.removeChild(confetti);
              }
            }, 1500);
          }, i * 50);
        }
      }

      // Trigger easter egg
      function triggerEasterEgg(element) {
        // Create floating hearts from the easter egg
        for (let i = 0; i < 10; i++) {
          const heart = document.createElement("div");
          heart.innerHTML = "üíñ";
          heart.style.position = "absolute";
          heart.style.fontSize = "20px";
          heart.style.top = element.style.top;
          heart.style.left = element.style.left;
          heart.style.zIndex = "1000";
          heart.style.opacity = "1";
          heart.style.transition = "all 2s ease-out";

          const angle = Math.random() * Math.PI * 2;
          const distance = 50 + Math.random() * 50;

          document.body.appendChild(heart);

          setTimeout(() => {
            heart.style.transform = `translate(${
              Math.cos(angle) * distance
            }px, ${Math.sin(angle) * distance}px)`;
            heart.style.opacity = "0";
          }, 10);

          // Remove heart after animation
          setTimeout(() => {
            if (heart.parentNode) {
              document.body.removeChild(heart);
            }
          }, 2000);
        }

        // Show message
        const message = document.createElement("div");
        message.innerHTML = "I Love You! ‚ù§Ô∏è";
        message.style.position = "absolute";
        message.style.top = element.style.top;
        message.style.left = element.style.left;
        message.style.color = "#fffff";
        message.style.fontSize = "1.2rem";
        message.style.fontWeight = "bold";
        message.style.zIndex = "1000";
        message.style.opacity = "0";
        message.style.transition = "all 1.5s ease-out";

        document.body.appendChild(message);

        setTimeout(() => {
          message.style.transform = "translateY(-50px)";
          message.style.opacity = "1";
        }, 10);

        // Remove message after animation
        setTimeout(() => {
          if (message.parentNode) {
            document.body.removeChild(message);
          }
        }, 1500);
      }

      // Initialize the page
      window.onload = function () {
        createFloatingElements();
        createSpeechBubble("page1");

        // Add click event to carousel items
        document.querySelectorAll(".carousel-item").forEach((item) => {
          item.addEventListener("click", function () {
            this.style.transform += " scale(1.2)";
            this.style.transition = "transform 1s";

            // Create balloon effect
            const balloon = document.createElement("div");
            balloon.innerHTML = "üéà";
            balloon.style.position = "absolute";
            balloon.style.fontSize = "30px";
            balloon.style.top =
              this.getBoundingClientRect().top + window.scrollY + "px";
            balloon.style.left =
              this.getBoundingClientRect().left + this.offsetWidth / 2 + "px";
            balloon.style.zIndex = "1000";
            balloon.style.transition = "all 3s ease-in";
            document.body.appendChild(balloon);

            // Create glitter effect
            for (let i = 0; i < 10; i++) {
              setTimeout(() => {
                const glitter = document.createElement("div");
                glitter.innerHTML = "‚ú®";
                glitter.style.position = "absolute";
                glitter.style.fontSize = "20px";
                glitter.style.top =
                  this.getBoundingClientRect().top + window.scrollY + "px";
                glitter.style.left =
                  this.getBoundingClientRect().left +
                  this.offsetWidth / 2 +
                  "px";
                glitter.style.zIndex = "1000";
                glitter.style.transition = "all 1s ease-out";

                const angle = Math.random() * Math.PI * 2;
                const distance = 30 + Math.random() * 30;

                document.body.appendChild(glitter);

                setTimeout(() => {
                  glitter.style.transform = `translate(${
                    Math.cos(angle) * distance
                  }px, ${Math.sin(angle) * distance}px)`;
                  glitter.style.opacity = "0";
                }, 10);

                // Remove glitter after animation
                setTimeout(() => {
                  if (glitter.parentNode) {
                    document.body.removeChild(glitter);
                  }
                }, 1000);
              }, i * 100);
            }

            setTimeout(() => {
              balloon.style.transform = "translateY(-100vh)";
              balloon.style.opacity = "0";
            }, 10);

            // Remove balloon after animation
            setTimeout(() => {
              document.body.removeChild(balloon);
            }, 3000);

            // Show message and proceed after delay
            document.getElementById("album-message").textContent =
              "A beautiful memory floats away with my love for you!";

            setTimeout(() => {
              showPage("page4");
              pauseMusic("album");
            }, 2000);
          });
        });

        // Set up file upload
        document
          .getElementById("file-input")
          .addEventListener("change", function (e) {
            if (e.target.files && e.target.files[0]) {
              const reader = new FileReader();
              reader.onload = function (event) {
                // Create a new carousel item with the uploaded image
                const carouselItems =
                  document.querySelectorAll(".carousel-item");
                const randomItem =
                  carouselItems[
                    Math.floor(Math.random() * carouselItems.length)
                  ];

                if (randomItem) {
                  randomItem.querySelector("img").src = event.target.result;

                  // Show success message
                  const message = document.createElement("div");
                  message.innerHTML = "Now you're part of our memories! üíñ";
                  message.style.position = "absolute";
                  message.style.top = "50%";
                  message.style.left = "50%";
                  message.style.transform = "translate(-50%, -50%)";
                  message.style.color = "#ff1493";
                  message.style.fontSize = "1.5rem";
                  message.style.fontWeight = "bold";
                  message.style.zIndex = "1000";
                  message.style.opacity = "0";
                  message.style.transition = "all 1.5s ease-out";

                  document.body.appendChild(message);

                  setTimeout(() => {
                    message.style.opacity = "1";
                  }, 10);

                  // Remove message after animation
                  setTimeout(() => {
                    if (message.parentNode) {
                      document.body.removeChild(message);
                    }
                  }, 3000);
                }
              };
              reader.readAsDataURL(e.target.files[0]);
            }
          });

        // Set up secret message
        setTimeout(() => {
          document.getElementById("secret-message").style.opacity = "1";
        }, 30000);
      };
    </script>
  </body>
</html>

